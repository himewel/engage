[
    {
        "$group": {
            "_id": {
                "groupId": "$_id.groupId"
            },
            "groupScore": {
                "$sum": "$roundScore"
            }
        }
    },
    {
        "$setWindowFields": {
            "sortBy": {
                "groupScore": -1
            },
            "output": {
                "rank": {
                    "$rank": {}
                }
            }
        }
    },
    {
        "$merge":{
            "into":"groupScores",
            "on":[
                "_id"
            ],
            "whenMatched": "replace"
        }
    }
]
